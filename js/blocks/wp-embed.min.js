!function(a){var b=a.element.createElement,c=a.blocks.registerBlockType,d=a.components.SandBox;a.blocks.unregisterBlockType("core-embed/wordpress"),c("gutenblocks/wp-embed",{title:gutenBlocksStrings.wp_embed.title,icon:"wordpress-alt",category:"embed",attributes:{url:{type:"string"}},edit:function(a){var c=function(b){b.preventDefault(),a.setAttributes({url:b.target.value,hasChanged:!0})},e=function(b){b&&b.preventDefault(),a.setAttributes({loading:!0});var c="proxy",d=encodeURIComponent(a.attributes.url);-1!==a.attributes.url.indexOf(wpApiSettings.root.replace("/wp-json",""))&&(c="embed"),window.fetch(wpApiSettings.root+"oembed/1.0/"+c+"?url="+d+"&_wpnonce="+wpApiSettings.nonce,{credentials:"include"}).then(function(b){b.json().then(function(b){a.setAttributes({title:b.title,html:b.html})})})};return!a.attributes.url||a.attributes.loading||a.attributes.hasChanged||e(),a.attributes.html||a.attributes.loading?a.attributes.html?b("figure",{key:"gist-sandbox",className:"wp-block-embed"},b(d,{title:a.attributes.title,html:a.attributes.html})):b("div",{className:"components-placeholder"},b("div",{key:"loading",className:"wp-block-embed is-loading"},b("span",{className:"spinner is-active"}))):b("div",{className:"components-placeholder"},b("form",{onSubmit:e},[b("div",{key:"block-placeholder",className:"components-placeholder__label"},b("label",{key:"block-label"},gutenBlocksStrings.wp_embed.title)),b("input",{key:"url-input",type:"url",className:"components-placeholder__input",placeholder:gutenBlocksStrings.wp_embed.inputPlaceholder,onChange:c}),b("button",{key:"url-button",type:"submit",className:"button-secondary"},gutenBlocksStrings.wp_embed.buttonPlaceholder)]))},save:function(a){if(a&&a.attributes.url)return b("div",null,"\n"+a.attributes.url+"\n")}})}(window.wp||{});