!function(a){var b=a.element.createElement,c=a.blocks.registerBlockType,d=a.blocks.BlockControls,e=a.blocks.AlignmentToolbar,f=a.blocks.RichText,g=a.components.Toolbar;c("gutenblocks/photo",{title:gutenBlocksStrings.photo.title,icon:"camera",category:"common",attributes:{src:{type:"string",source:"attribute",selector:"img",attribute:"src"},width:{type:"number"},height:{type:"number"},caption:{type:"string",source:"children",selector:"figcaption"},alignment:{type:"string"}},edit:function(a){var c=a.attributes.alignment,h=a.isSelected,i=function(b){a.setAttributes({alignment:b})},j=function(b){b.preventDefault(),a.setAttributes({src:b.target.value,alignment:"none"})},k=function(b){b.preventDefault();var c=new Image;c.onload=function(){a.attributes.src&&a.setAttributes({width:c.width,height:c.height})},c.src=a.attributes.src},l=function(b){a.setAttributes({caption:b})},m=function(){a.setAttributes({width:null,height:null,src:null})};return a.attributes.width&&a.attributes.src?[b("figure",{key:"preview-photo",className:null,style:{textAlign:a.attributes.alignment}},[b("img",{key:"photo-preview",src:a.attributes.src,style:{maxWidth:"100%"}}),b(f,{key:"photo-caption",tagName:"figcaption",placeholder:gutenBlocksStrings.photo.captionPlaceholder,value:a.attributes.caption,onChange:l})]),!!h&&b(d,{key:"edit-photo"},[b(e,{key:"aligncontrol",value:c,onChange:i}),b(g,{key:"editcontrol",controls:[{icon:"edit",title:gutenBlocksStrings.photo.editBubble,onClick:m}]})])]:b("div",{className:"components-placeholder"},b("form",{onSubmit:k},[b("div",{key:"block-placeholder",className:"components-placeholder__label"},b("label",{key:"block-label",htmlFor:"url-input-"+a.id},gutenBlocksStrings.photo.title)),b("input",{key:"url-input",type:"url",id:"url-input-"+a.id,className:"components-placeholder__input",placeholder:gutenBlocksStrings.photo.inputPlaceholder,onChange:j}),b("button",{key:"url-button",type:"submit",className:"button-secondary"},gutenBlocksStrings.photo.buttonPlaceholder)]))},save:function(a){if(a&&a.attributes.src&&a.attributes.width){var c=a.attributes.alignment,d=a.attributes.caption,e=[b("img",{key:"photo-save",src:a.attributes.src,width:a.attributes.width,height:a.attributes.height,style:{maxWidth:"100%"}})];return d&&d.length>0&&e.push(b("figcaption",{key:"photo-caption"},d)),b("figure",{key:"save-photo",className:c?"align"+c:null,style:c?{textAlign:c}:"none"},e)}}})}(window.wp||{});