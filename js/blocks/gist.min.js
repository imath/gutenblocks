!function(t){var s=t.element.createElement,e=t.blocks.registerBlockType,n=t.blocks.createBlock,i=t.components.SandBox,o=s("svg",{"aria-hidden":!0,role:"img",className:"dashicon gist-icon",focusable:"false",width:"20",height:"20",viewBox:"0 0 12 16",stroke:"#0073aa",strokeWidth:"0.5",xmlns:"http://www.w3.org/2000/svg"},s("path",{d:"M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"}));e("gutenblocks/gist",{title:gutenBlocksStrings.gist.title,description:gutenBlocksStrings.gist.description,icon:function(){return o},category:"embed",attributes:{url:{type:"string"},src:{type:"string"}},edit:function(e){var t;return!e.attributes.url&&!e.attributes.loading||e.attributes.needsSubmit?(e.setAttributes({needsSubmit:!0}),s("div",{className:"components-placeholder wp-block-embed is-large"},[s("div",{key:"block-placeholder",className:"components-placeholder__label"},[s("span",{key:"block-icon",className:"block-editor-block-icon has-colors"},o),gutenBlocksStrings.gist.title]),s("div",{key:"block-instructions",className:"components-placeholder__instructions"},gutenBlocksStrings.gist.instructions),s("div",{key:"block-fieldset",className:"components-placeholder__fieldset"},s("form",{onSubmit:function(t){t.preventDefault(),e.setAttributes({loading:!0,needsSubmit:!1})}},[s("input",{key:"url-input",type:"url",id:"url-input-"+e.id,className:"components-placeholder__input",placeholder:gutenBlocksStrings.gist.inputPlaceholder,onChange:function(t){t.preventDefault(),e.setAttributes({url:t.target.value})}}),s("button",{key:"url-button",type:"submit",className:"components-button is-primary"},gutenBlocksStrings.gist.buttonPlaceholder)]))])):e.attributes.src?s("figure",{key:"gist-sandbox",className:"wp-block-embed"},s(i,{html:'<script src="'+e.attributes.src+'"><\/script>'})):(t=encodeURIComponent(e.attributes.url),window.fetch(wpApiSettings.root+"oembed/1.0/proxy?url="+t+"&_wpnonce="+wpApiSettings.nonce,{credentials:"include"}).then(function(t){t.json().then(function(t){e.setAttributes({src:t.url})})}),s("div",{key:"loading",className:"wp-block-embed is-loading"},s("span",{className:"spinner is-active"})))},save:function(t){if(t&&t.attributes.url)return s("div",null,"\n"+t.attributes.url+"\n")},transforms:{from:[{type:"raw",isMatch:function(t){return"P"===t.nodeName&&/^\s*(https?:\/\/gist\.github\.com\S+)\s*$/i.test(t.textContent)},transform:function(t){return n("gutenblocks/gist",{url:t.textContent.trim()})}}]}})}(window.wp||{});