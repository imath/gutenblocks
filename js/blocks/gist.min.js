!function(a){var b=a.element.createElement,c=a.blocks.registerBlockType,d=a.blocks.createBlock,e=a.components.SandBox;c("gutenblocks/gist",{title:gutenBlocksStrings.gist.title,icon:function(){return b("svg",{"aria-hidden":!0,role:"img",className:"dashicon gist-icon",focusable:"false",width:"20",height:"20",viewBox:"0 0 12 16",stroke:"#0073aa",strokeWidth:"0.5",xmlns:"http://www.w3.org/2000/svg"},b("path",{d:"M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"}))},category:"embed",attributes:{url:{type:"string"},src:{type:"string"}},edit:function(a){var c=function(b){b.preventDefault(),a.setAttributes({url:b.target.value})},d=function(){var b=encodeURIComponent(a.attributes.url);window.fetch(wpApiSettings.root+"oembed/1.0/proxy?url="+b+"&_wpnonce="+wpApiSettings.nonce,{credentials:"include"}).then(function(b){b.json().then(function(b){a.setAttributes({src:b.url})})})},f=function(b){b.preventDefault(),a.setAttributes({loading:!0,needsSubmit:!1})};return!a.attributes.url&&!a.attributes.loading||a.attributes.needsSubmit?(a.setAttributes({needsSubmit:!0}),b("div",{className:"components-placeholder"},b("form",{onSubmit:f},[b("div",{key:"block-placeholder",className:"components-placeholder__label"},b("label",{key:"block-label",htmlFor:"url-input-"+a.id},gutenBlocksStrings.gist.title)),b("input",{key:"url-input",type:"url",id:"url-input-"+a.id,className:"components-placeholder__input",placeholder:gutenBlocksStrings.gist.inputPlaceholder,onChange:c}),b("button",{key:"url-button",type:"submit",className:"button-secondary"},gutenBlocksStrings.gist.buttonPlaceholder)]))):a.attributes.src?b("figure",{key:"gist-sandbox",className:"wp-block-embed"},b(e,{html:'<script src="'+a.attributes.src+'"></script>'})):(d(),b("div",{className:"components-placeholder"},b("div",{key:"loading",className:"wp-block-embed is-loading"},b("span",{className:"spinner is-active"}))))},save:function(a){if(a&&a.attributes.url)return b("div",null,"\n"+a.attributes.url+"\n")},transforms:{from:[{type:"raw",isMatch:function(a){return"P"===a.nodeName&&/^\s*(https?:\/\/gist\.github\.com\S+)\s*$/i.test(a.textContent)},transform:function(a){return d("gutenblocks/gist",{url:a.textContent.trim()})}}]}})}(window.wp||{});